<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		<!-- Translation TYPES -->
		<record id="translation_type_tree_view" model="ir.ui.view">
			<field name="name">"translation_type_tree_view"</field>
			<field name="model">translation.type</field>
			<field name="arch" type="xml">
				<tree string="Type">
					<field name="name" />
					<field name="description" />
				</tree>
			</field>
		</record>
		<record id="translation_type_form_view" model="ir.ui.view">
			<field name="name">"translation_type_form_view"</field>
			<field name="model">translation.type</field>
			<field name="arch" type="xml">
				<form string="Type">
					<field name="name" />
					<field name="description" />
				</form>
			</field>
		</record>
		<record id='translation_type_menu_action' model='ir.actions.act_window'>
			<field name="name">Translation types</field>
			<field name="res_model">translation.type</field>
			<field name="view_mode">tree,form</field>
		</record>
		<menuitem action="translation_type_menu_action" parent="translation_setup"
			id="translation_type_menu" />

		<!-- Evidencija prijevoda -->
		<record id="translation_evidention_tree_view" model="ir.ui.view">
			<field name="name">"translation_evidention_tree_view"</field>
			<field name="model">translation.evidention</field>
			<field name="arch" type="xml">
				<tree string="Evidention"
					colors="black:state =='draft';
				            blue:state in ('open','process');
                            green:state =='deliver'
                            grey:state == 'cancel'">
					<field name="sequence" />
					<field name="name" />
					<field name="partner_id" />
					<field name="date_recived" />
					<field name="date_due" />
					<!-- field name="time_remain" /> -->
					<field name="total_cards" />
					<field name="state" />

				</tree>
			</field>
		</record>
		<record id="translation_evidention_form_view" model="ir.ui.view">
			<field name="name">translation_evidention_form_view</field>
			<field name="model">translation.evidention</field>
			<field name="arch" type="xml">
				<form string="Evidention" version="7.0">
					<header>
						<field name="state" widget="statusbar" statusbar_visible="open,process,deliver,finish" />
					</header>
					<sheet>
						<h1>
							<label string="Evidention " />
							<field name="sequence" class="oe_inline" readonly="1" />
						</h1>
						<div class="oe_button_box oe_right">
							<button string="Recive" name="action_evidention_recive"
								type="object" class="oe_highlight" states="draft" />
							<button name="return_action_to_open" type="object"
								context="{'xml_id':'translation_document_task_menu_action'}"
								string="Zadaci " help="show all translation task for this evidemtion" />

						</div>
						<!-- field name="name" /> -->
						<h2>
							<label string="Partner" />
							<field name="partner_id" class="oe_inline" />
						</h2>
						<group colspan="4" col="4">


							<field name="date_recived"
								help="Leave blank to autofill with current date/time on save" />
							<field name="date_due" />
						</group>
						<notebook colspan="4">
							<page string="Documents">
								<h3>
									<label string="Documents in this evidention" />
								</h3>
								<field name="document_ids" colspan="4" nolabel="1"
									context="{'tree_view_ref':'translations.translation_document_tree_view_enter',
								              'form_view_ref':'translations.translation_document_form_view_enter'}" />
							</page>
							<page string="Note">
								<field name="note" colspan="4" />
							</page>
						</notebook>
					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"
							groups="base.group_user" />
						<field name="message_ids" colspan="4" widget="mail_thread" />
					</div>
				</form>
			</field>
		</record>
		<record id="translation_evidention_filter" model="ir.ui.view">
			<field name="name">translation_evidention_filter</field>
			<field name="model">translation.evidention</field>
			<field name="arch" type="xml">
				<search string="Search translation evidention">
					<field name="name" filter_domain="['|',('name','ilike',self),('partner_id','ilike',self)]" />
					<filter name="state_notfin" string="Not finished" domain="[('state','!=','finish')]" />
					<filter name="state_fin" string="Finished" domain="[('state','=','finish')]" />
					<filter name="state_proc" string="Processing" domain="[('state','=','process')]" />
					<group expand="0" string="Group By...">
						<separator />
						<filter string="Company" context="{'group_by':'partner_id'}" />
						<filter string="Status" context="{'group_by':'state'}" />
					</group>
				</search>
			</field>
		</record>


		<record id='translation_evidention_menu_action' model='ir.actions.act_window'>
			<field name="name">Translations Evidention</field>
			<field name="res_model">translation.evidention</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="translation_evidention_tree_view" />
            <field name="search_view_id" ref="translation_evidention_filter" />
            <field name="context">{"search_default_state_notfin":1}</field>
		</record>
		<menuitem action="translation_evidention_menu_action" parent="translation_overview"
			id="translation_evidention_menu" sequence="10" />

		<!-- Translated DOCUMENT -->
		<record id="translation_document_tree_view" model="ir.ui.view">
			<field name="name">translation_document_tree_view</field>
			<field name="model">translation.document</field>
			<field name="arch" type="xml">
				<tree string="Document" version="7.0" create="false">
					<field name="sequence" />
					<field name="partner_id" />
					<field name="name" />
					<field name="language_id" />
					<field name="task_ids" />
					<field name="state" />
				</tree>
			</field>
		</record>
		<record id="translation_document_form_view" model="ir.ui.view">
			<field name="name">translation_document_form_view</field>
			<field name="model">translation.document</field>
			<field name="arch" type="xml">
				<form string="Document" version="7.0" create="false">
					<header>
						<field name="state" widget="statusbar" statusbar_visible="draft,open,process,finish" />
					</header>
					<sheet>
						<h1>
							<label string="Document" />
							<field name="sequence" readonly="1" class="oe_inline" />
						</h1>
						<group>
							<field name="name" />
							<field name="language_id" />
							<field name="type_id" />
							<field name="cards_estm" />
							<field name="date_due" />
							<field name="partner_id" invisible="1" />
							<field name="merge_with" />

						</group>
						<field name="task_ids" />
					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"
							groups="base.group_user" />
						<field name="message_ids" colspan="4" widget="mail_thread" />
					</div>
				</form>
			</field>
		</record>
		<record id="translation_document_filter" model="ir.ui.view">
			<field name="name">translation_document_filter</field>
			<field name="model">translation.document</field>
			<field name="arch" type="xml">
				<search string="Search translation documents">

					<field name="name"
						filter_domain="['|','|',('sequence','ilike',self),('partner_id','ilike',self),('name','ilike',self)]" />

					<filter name="state_new" string="Not started" domain="[('state','=','open')]" />
					<filter name="state_proc" string="In process" domain="[('state','=','process')]" />
					<filter name="state_notfin" string="Not Finished"
						domain="[('state','!=','finish')]" />
					<filter name="state_fin" string="Finished" domain="[('state','=','finish')]" />

					<group expand="0" string="Group By...">
						<filter string="Language translated" domain="[]"
							context="{'group_by':'language_id'}" />
						<separator />
						<filter string="Partner" context="{'group_by':'partner_id'}" />
						<filter string="Status" context="{'group_by':'state'}" />
					</group>
				</search>
			</field>
		</record>

		<record id='translation_document_menu_action' model='ir.actions.act_window'>
			<field name="name">Documents</field>
			<field name="res_model">translation.document</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('sequence','!=', False)]</field>
			<field name="view_id" ref="translation_document_tree_view" />
			<field name="search_view_id" ref="translation_document_filter" />
			<field name="context">{"search_default_state_notfin":1}</field>
		</record>
		<menuitem action="translation_document_menu_action" parent="translation_overview"
			id="translation_document_menu" sequence="20" />

		<record id="translation_document_tree_view_enter" model="ir.ui.view">
			<field name="name">translation_document_tree_view_enter</field>
			<field name="model">translation.document</field>
			<field name="priority" eval="20" />
			<field name="arch" type="xml">
				<tree string="Document">
					<field name="sequence" />
					<field name="name" />
					<field name="language_id" />

					<field name="task_ids" />
					<field name="state" />
				</tree>
			</field>
		</record>
		<record id="translation_document_form_view_enter" model="ir.ui.view">
			<field name="name">translation_document_form_view_enter</field>
			<field name="model">translation.document</field>
			<field name="priority" eval="20" />
			<field name="arch" type="xml">
				<form string="Document">
					<group colspan="4">
						<field name="name" />
						<field name="language_id" />
						<field name="type_id" />
						<field name="cards_estm" />
						<field name="date_due" />
						<field name="merge_with" />

					</group>
					<field name="task_ids" colspan="4" nolabel="1"
						context="{'tree_view_ref':'translations.translation_document_task_tree_view_enter',
                                  'form_view_ref':'translations.translation_document_task_form_view_enter'}" />
				</form>
			</field>
		</record>
		<!-- Document TASK -->
		<record id="translation_document_task_tree_view" model="ir.ui.view">
			<field name="name">"translation_document_task_tree_view"</field>
			<field name="model">translation.document.task</field>
			<field name="arch" type="xml">
				<tree string="Translation task" create="false">
					<!-- editable="bottom" -->
					<field name="name" readonly="1" />
					<field name="document_id" invisible="1" />
					<field name="partner_id" invisible="1" />
					<field name="language_origin" invisible="1" />
					<field name="language_id" />
					<field name="lectoring" />
					<field name="certified" />
					<field name="translate_ids" />
					<field name="state" readonly="1" />
				</tree>
			</field>
		</record>


		<record id="translation_document_task_form_view" model="ir.ui.view">
			<field name="name">translation_document_task_form_view</field>
			<field name="model">translation.document.task</field>
			<field name="arch" type="xml">
				<form string="Evidention line" version="7.0" create="false">
					<header>

						<field name="state" widget="statusbar" statusbar_visible="draft,assign,finish"
							statusbar_colors='{"trans_p":"green","lect_p":"green","finish":"red","cancel":"red"}' />
					</header>
					<sheet>
						<h1>
							<label string="Translation task " />
							<field name="name" readonly="1" class="oe_inline" />
						</h1>
						<div class="oe_button_box oe_right">
							<button string="Start translation" name="button_translate_start"
								type="object" states="draft,assign" class="oe_highlight" />
							<button string="Start lecturing" name="button_lecture_start"
								type="object" states="lect_w" />
							<button string="Finish" name="button_task_finish" type="object"
								states="trans,lect" />
							<button string="Pause" name="button_pause" type="object"
								states="lect,trans" />
							<button string="Resume" name="button_resume" type="object"
								states="trans_p,lect_p" class="oe_highlight" />

						</div>
						<group>
							<!-- field name="language_origin" inivisble="1" /> -->
							<field name="document_id" readonly="1" />
							<field name="language_origin" readonly="1" />
							<field name="language_id" />
							<field name="certified" />
							<field name="lectoring" />
						</group>
						<notebook colspan="4">
							<page string="Translators">
								<h3>
									<label string="Translation start : " /> <!-- invisible="[('trans_start','=','false')]" -->
									<field name="trans_start" class="oe_inline" readonly="1" />
									<label string=", finish : " /> <!-- invisible="[('trans_stop','=',False)]" -->
									<field name="trans_finish" class="oe_inline" readonly="1" />
									<label string=", total translated cards :" />
									<field name="trans_cards" class="oe_inline" />
								</h3>
								<field name="translate_ids" colspan="4" nolabel="1"
									domain="[('language_ids','in',language_origin)]"
									context="{'tree_view_ref':'translations.translation_employee_select_tree_view',
                                                    'form_view_ref':'translations.translation_employee_select_form_view'}" />
							</page>
							<page string="Lectors">
								<h3>
									<label string="Lectoring start : " /><!-- invisible="[('lect_start','=',False)]" -->
									<field name="lect_start" class="oe_inline" readonly="1" />
									<label string=", finish : " class="oe_inline" /> <!-- invisible="[('lect_stop','=',False)]" -->
									<field name="lect_finish" class="oe_inline" readonly="1" />
								</h3>
								<field name="lecture_ids" nolabel="1">
									<tree string="lectors">
										<field name="name" />
										<field name="competence" />
										<field name="language_ids" />
									</tree>
								</field>
							</page>
							<page string="Log" colspan="4">
								<field name="work_ids" readonly="1" nolabel="1" colspan="4">
									<tree string="Work">
										<field name="work_type" />
										<field name="job_start" />
										<field name="job_stop" />
										<field name="employee_id" />
										<!-- <field name="time_spent" /> -->
									</tree>
								</field>
							</page>
						</notebook>
					</sheet>

					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"
							groups="base.group_user" />
						<field name="message_ids" colspan="4" widget="mail_thread" />
					</div>

				</form>
			</field>
		</record>

		<record id="translation_document_task_tree_view_enter" model="ir.ui.view">
			<field name="name">"translation_document_task_tree_view_enter"</field>
			<field name="model">translation.document.task</field>
			<field name="priority" eval="20" />
			<field name="arch" type="xml">
				<tree string="Translation task">
					<!-- editable="bottom" -->
					<field name="name" readonly="1" />
					<field name="document_id" invisible="1" />
					<field name="partner_id" invisible="1" />
					<field name="language_id" />
					<field name="lectoring" />
					<field name="certified" />
					<field name="translate_ids" />
					<field name="state" readonly="1" />
				</tree>
			</field>
		</record>

		<record id="translation_document_task_form_view_enter" model="ir.ui.view">
			<field name="name">translation_document_task_form_view_enter</field>
			<field name="model">translation.document.task</field>
			<field name="priority" eval="20" />
			<field name="arch" type="xml">
				<form string="Evidention line">
					<group colspan="4" col="4">
						<field name="language_id" />
						<field name="lectoring" />
						<field name="certified" />
					</group>
					<field name="translate_ids" colspan="4" nolabel="1"

						context="{'tree_view_ref':'translations.translation_employee_select_tree_view',
						'form_view_ref':'translations.translation_employee_select_form_view'}" />
				</form>
			</field>
		</record>
		<record id="translation_document_task_filter" model="ir.ui.view">
			<field name="name">translation_document_task_filter</field>
			<field name="model">translation.document.task</field>
			<field name="arch" type="xml">
				<search string="Search translation task">

					<field name="name"
						filter_domain="['|',('name','ilike',self),('partner_id','ilike',self)]" />

					<filter name="state_nostart" string="Not started"
						domain="[('state','in',('draft','asigned'))]" />
					<filter name="state_tran" string="In translation"
						domain="[('state','in',('trans','trans_p'))]" />
					<filter name="state_lect" string="Lectoring"
						domain="[('state','=',('lect','lect_p','lect_w'))]" />
					<filter name="state_notfin" string="Not Finished" domain="[('state','!=','finish')]" />
					<filter name="state_fin" string="Finished" domain="[('state','=','finish')]" />

					<group expand="0" string="Group By...">
						<filter string="Language original" domain="[]"
							context="{'group_by' : 'language_origin'}" />
						<filter string="Language translation" domain="[]"
							context="{'group_by' : 'language_id'}" />
						<separator />
						<filter string="Company" context="{'group_by': 'partner_id'}" />
						<filter string="Status" context="{'group_by': 'state'}" />
					</group>
				</search>
			</field>
		</record>

		<record id='translation_document_task_menu_action' model='ir.actions.act_window'>
			<field name="name">Translation tasks</field>
			<field name="res_model">translation.document.task</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('name','!=', False)]</field>
			<field name="view_id" ref="translation_document_task_tree_view" />
			<field name="search_view_id" ref="translation_document_task_filter" />
			<field name="context">{"search_default_state_notfin":1}</field>
		</record>

		<menuitem action="translation_document_task_menu_action"
			parent="translation_overview" id="translation_document_task_menu"
			sequence="20" />

		<record id="translation_employee_select_tree_view" model="ir.ui.view">
			<field name="name">translation_employee_select_tree_view</field>
			<field name="model">hr.employee</field>
			<field name="priority" eval="20" />
			<field name="arch" type="xml">
				<tree string="Translators">
					<field name="name" />
					<field name="language_ids" />
					<field name="mobile_phone" />
					<field name="notes" />
				</tree>
			</field>
		</record>
		<record id="translation_employee_select_form_view" model="ir.ui.view">
			<field name="name">translation_employee_select_form_view</field>
			<field name="model">hr.employee</field>
			<field name="priority" eval="20" />
			<field name="arch" type="xml">
				<form string="Translators">
					<group colspan="4" col="4">
						<field name="name" />
						<field name="notes" />
						<field name="language_ids" />
					</group>
				</form>
			</field>
		</record>

	</data>
</openerp>
 
